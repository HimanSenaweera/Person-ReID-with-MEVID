<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scale Variation Challenge</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial,
          sans-serif;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        padding: 20px;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        padding: 30px;
      }
      h1 {
        text-align: center;
        color: #1e293b;
        margin-bottom: 10px;
        font-size: 28px;
      }
      .subtitle {
        text-align: center;
        color: #64748b;
        margin-bottom: 30px;
        font-size: 14px;
      }
      .button-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
        gap: 10px;
        margin-bottom: 30px;
      }
      .method-btn {
        padding: 12px 16px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        font-size: 13px;
        cursor: pointer;
        transition: all 0.3s;
        background: #f1f5f9;
        color: #475569;
      }
      .method-btn:hover {
        background: #e2e8f0;
      }
      .method-btn.active {
        background: #2563eb;
        color: #fff;
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
      }
      .chart-container {
        position: relative;
        height: 500px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Scale Variation Challenge</h1>
      <p class="subtitle"></p>

      <div class="button-grid" id="methodButtons"></div>

      <div class="chart-container">
        <canvas id="myChart"></canvas>
      </div>
    </div>

    <script>
      // Exact values from your table image
      const allData = {
        CAL: {
          paper: {
            mAP: 20.6,
            "Top-1": 35.2,
            "Top-5": 50.7,
            "Top-10": 58.4,
            "Top-20": 62.4,
          },
          ours: {
            mAP: 25.1,
            "Top-1": 46.6,
            "Top-5": 61.8,
            "Top-10": 68.0,
            "Top-20": 74.1,
          },
        },
        AGRL: {
          paper: {
            mAP: 17.7,
            "Top-1": 29.5,
            "Top-5": 43.6,
            "Top-10": 49.3,
            "Top-20": 58.4,
          },
          ours: {
            mAP: 17.6,
            "Top-1": 28.9,
            "Top-5": 43.6,
            "Top-10": 48.7,
            "Top-20": 57.4,
          },
        },
        "BiCnet-TKS": {
          paper: {
            mAP: 4.6,
            "Top-1": 10.7,
            "Top-5": 20.8,
            "Top-10": 25.5,
            "Top-20": 34.9,
          },
          ours: {
            mAP: null,
            "Top-1": null,
            "Top-5": null,
            "Top-10": null,
            "Top-20": null,
          },
        },
        TCLNet: {
          paper: {
            mAP: 17.6,
            "Top-1": 34.2,
            "Top-5": 44.3,
            "Top-10": 50.3,
            "Top-20": 59.4,
          },
          ours: {
            mAP: 13.7,
            "Top-1": 28.2,
            "Top-5": 39.3,
            "Top-10": 44.3,
            "Top-20": 50.7,
          },
        },
        PSTA: {
          paper: {
            mAP: 16.8,
            "Top-1": 29.9,
            "Top-5": 44.3,
            "Top-10": 51.7,
            "Top-20": 60.1,
          },
          ours: {
            mAP: 16.1,
            "Top-1": 27.5,
            "Top-5": 42.0,
            "Top-10": 48.8,
            "Top-20": 56.0,
          },
        },
        PiT: {
          paper: {
            mAP: 10.6,
            "Top-1": 23.5,
            "Top-5": 37.3,
            "Top-10": 41.6,
            "Top-20": 51.0,
          },
          ours: {
            mAP: 10.6,
            "Top-1": 24.5,
            "Top-5": 37.3,
            "Top-10": 41.3,
            "Top-20": 50.7,
          },
        },
        STMN: {
          paper: {
            mAP: 9.4,
            "Top-1": 22.3,
            "Top-5": 42.0,
            "Top-10": 51.0,
            "Top-20": 58.0,
          },
          ours: {
            mAP: null,
            "Top-1": null,
            "Top-5": null,
            "Top-10": null,
            "Top-20": null,
          },
        },
        "Attn-CL": {
          paper: {
            mAP: 14.3,
            "Top-1": 26.5,
            "Top-5": 37.6,
            "Top-10": 46.3,
            "Top-20": 55.7,
          },
          ours: {
            mAP: 12.9,
            "Top-1": 28.2,
            "Top-5": 42.6,
            "Top-10": 48.3,
            "Top-20": 60.1,
          },
        },
        "Attn-CL+rerank": {
          paper: {
            mAP: 21.2,
            "Top-1": 33.6,
            "Top-5": 44.0,
            "Top-10": 50.0,
            "Top-20": 54.4,
          },
          ours: {
            mAP: 18.6,
            "Top-1": 33.6,
            "Top-5": 44.0,
            "Top-10": 49.3,
            "Top-20": 56.7,
          },
        },
        AP3D: {
          paper: {
            mAP: 11.4,
            "Top-1": 24.5,
            "Top-5": 35.9,
            "Top-10": 42.6,
            "Top-20": 52.7,
          },
          ours: {
            mAP: 28.1,
            "Top-1": 31.0,
            "Top-5": 56.4,
            "Top-10": 71.0,
            "Top-20": 76.4,
          },
        },
      };

      let currentChart = null;
      let selectedMethod = "CAL";

      function createButtons() {
        const container = document.getElementById("methodButtons");
        Object.keys(allData).forEach((method) => {
          const btn = document.createElement("button");
          btn.className =
            "method-btn" + (method === selectedMethod ? " active" : "");
          btn.textContent = method;
          btn.onclick = () => selectMethod(method);
          container.appendChild(btn);
        });
      }

      function selectMethod(method) {
        selectedMethod = method;
        document.querySelectorAll(".method-btn").forEach((btn) => {
          btn.classList.toggle("active", btn.textContent === method);
        });
        updateChart();
      }

      function updateChart() {
        const data = allData[selectedMethod];
        const metrics = ["mAP", "Top-1", "Top-5", "Top-10", "Top-20"];

        const chartData = {
          labels: metrics,
          datasets: [
            {
              label: "Paper",
              data: metrics.map((m) => data.paper[m]),
              backgroundColor: "rgba(59,130,246,0.85)",
              borderColor: "rgb(59,130,246)",
              borderWidth: 2,
              borderRadius: 6,
            },
            {
              label: "Ours",
              data: metrics.map((m) => data.ours[m]),
              backgroundColor: "rgba(249,115,22,0.85)",
              borderColor: "rgb(249,115,22)",
              borderWidth: 2,
              borderRadius: 6,
            },
          ],
        };

        if (currentChart) currentChart.destroy();

        const ctx = document.getElementById("myChart").getContext("2d");
        currentChart = new Chart(ctx, {
          type: "bar",
          data: chartData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: true,
                position: "top",
                labels: { font: { size: 15, weight: "bold" }, padding: 15 },
              },
              datalabels: {
                anchor: "end",
                align: "top",
                formatter: (v) => (v == null ? "â€“" : v),
                font: { weight: "bold", size: 12 },
                color: (ctx) =>
                  ctx.datasetIndex === 0 ? "#1e40af" : "#c2410c",
              },
              tooltip: { enabled: true },
            },
            scales: {
              y: {
                beginAtZero: true,
                max: 80,
                title: {
                  display: true,
                  text: "Performance (%)",
                  font: { size: 15, weight: "bold" },
                },
                ticks: { font: { size: 12 } },
              },
              x: { ticks: { font: { size: 13, weight: "600" } } },
            },
          },
          plugins: [ChartDataLabels],
        });
      }

      // Initialize
      createButtons();
      updateChart();
    </script>
  </body>
</html>
