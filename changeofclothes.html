<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Change-of-Clothing Challenge</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial,
          sans-serif;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        padding: 20px;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        padding: 30px;
      }
      h1 {
        text-align: center;
        color: #1e293b;
        margin-bottom: 10px;
        font-size: 28px;
      }
      .subtitle {
        text-align: center;
        color: #64748b;
        margin-bottom: 30px;
        font-size: 14px;
      }
      .button-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
        gap: 10px;
        margin-bottom: 30px;
      }
      .method-btn {
        padding: 12px 16px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        font-size: 13px;
        cursor: pointer;
        transition: all 0.3s;
        background: #f1f5f9;
        color: #475569;
      }
      .method-btn:hover {
        background: #e2e8f0;
      }
      .method-btn.active {
        background: #2563eb;
        color: #fff;
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
      }
      .chart-container {
        position: relative;
        height: 500px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Change-of-Clothing Challenge</h1>
      <p class="subtitle"></p>

      <div class="button-grid" id="methodButtons"></div>

      <div class="chart-container">
        <canvas id="myChart"></canvas>
      </div>
    </div>

    <script>
      // Exact values from the provided image
      const allData = {
        CAL: {
          paper: {
            mAP: 4.3,
            "Top-1": 3.5,
            "Top-5": 10.6,
            "Top-10": 14.8,
            "Top-20": 19.4,
          },
          ours: {
            mAP: 4.3,
            "Top-1": 3.5,
            "Top-5": 11.6,
            "Top-10": 14.8,
            "Top-20": 19.4,
          },
        },
        AGRL: {
          paper: {
            mAP: 5.7,
            "Top-1": 4.9,
            "Top-5": 15.1,
            "Top-10": 19.0,
            "Top-20": 25.7,
          },
          ours: {
            mAP: 5.7,
            "Top-1": 4.9,
            "Top-5": 15.9,
            "Top-10": 19.0,
            "Top-20": 26.1,
          },
        },
        "BiCnet-TKS": {
          paper: {
            mAP: 1.7,
            "Top-1": 0.7,
            "Top-5": 4.6,
            "Top-10": 7.8,
            "Top-20": 13.4,
          },
          ours: {
            mAP: 1.7,
            "Top-1": 0.7,
            "Top-5": 4.6,
            "Top-10": 7.8,
            "Top-20": 13.0,
          },
        },
        TCLNet: {
          paper: {
            mAP: 3.9,
            "Top-1": 3.5,
            "Top-5": 8.8,
            "Top-10": 14.1,
            "Top-20": 21.1,
          },
          ours: {
            mAP: 2.8,
            "Top-1": 1.1,
            "Top-5": 6.0,
            "Top-10": 8.8,
            "Top-20": 14.1,
          },
        },
        PSTA: {
          paper: {
            mAP: 5.1,
            "Top-1": 5.6,
            "Top-5": 12.3,
            "Top-10": 19.4,
            "Top-20": 28.9,
          },
          ours: {
            mAP: 5.1,
            "Top-1": 5.6,
            "Top-5": 12.0,
            "Top-10": 19.0,
            "Top-20": 28.9,
          },
        },
        PiT: {
          paper: {
            mAP: 2.0,
            "Top-1": 1.1,
            "Top-5": 5.3,
            "Top-10": 8.5,
            "Top-20": 13.7,
          },
          ours: {
            mAP: 2.0,
            "Top-1": 1.1,
            "Top-5": 4.9,
            "Top-10": 7.8,
            "Top-20": 13.0,
          },
        },
        STMN: {
          paper: {
            mAP: 1.2,
            "Top-1": 0.4,
            "Top-5": 1.8,
            "Top-10": 3.9,
            "Top-20": 6.0,
          },
          ours: {
            mAP: 1.2,
            "Top-1": 0.4,
            "Top-5": 1.8,
            "Top-10": 3.9,
            "Top-20": 6.0,
          },
        },
        "Attn-CL": {
          paper: {
            mAP: 3.4,
            "Top-1": 2.8,
            "Top-5": 8.5,
            "Top-10": 15.5,
            "Top-20": 24.6,
          },
          ours: {
            mAP: 3.8,
            "Top-1": 3.5,
            "Top-5": 8.8,
            "Top-10": 14.4,
            "Top-20": 24.3,
          },
        },
        "Attn-CL+rerank": {
          paper: {
            mAP: 4.2,
            "Top-1": 2.1,
            "Top-5": 9.2,
            "Top-10": 13.7,
            "Top-20": 22.5,
          },
          ours: {
            mAP: 5.2,
            "Top-1": 4.6,
            "Top-5": 12.3,
            "Top-10": 15.1,
            "Top-20": 22.2,
          },
        },
        AP3D: {
          paper: {
            mAP: 2.9,
            "Top-1": 1.8,
            "Top-5": 7.4,
            "Top-10": 9.5,
            "Top-20": 16.6,
          },
          ours: {
            mAP: 9.7,
            "Top-1": 2.7,
            "Top-5": 21.6,
            "Top-10": 37.8,
            "Top-20": 43.2,
          },
        },
      };

      let currentChart = null;
      let selectedMethod = "AP3D";

      function createButtons() {
        const container = document.getElementById("methodButtons");
        Object.keys(allData).forEach((method) => {
          const btn = document.createElement("button");
          btn.className =
            "method-btn" + (method === selectedMethod ? " active" : "");
          btn.textContent = method;
          btn.onclick = () => selectMethod(method);
          container.appendChild(btn);
        });
      }

      function selectMethod(method) {
        selectedMethod = method;
        document.querySelectorAll(".method-btn").forEach((btn) => {
          btn.classList.toggle("active", btn.textContent === method);
        });
        updateChart();
      }

      function updateChart() {
        const data = allData[selectedMethod];
        const metrics = ["mAP", "Top-1", "Top-5", "Top-10", "Top-20"];

        const chartData = {
          labels: metrics,
          datasets: [
            {
              label: "Paper",
              data: metrics.map((m) => data.paper[m]),
              backgroundColor: "rgba(59,130,246,0.85)",
              borderColor: "rgb(59,130,246)",
              borderWidth: 2,
              borderRadius: 6,
            },
            {
              label: "Ours",
              data: metrics.map((m) => data.ours[m]),
              backgroundColor: "rgba(249,115,22,0.85)",
              borderColor: "rgb(249,115,22)",
              borderWidth: 2,
              borderRadius: 6,
            },
          ],
        };

        if (currentChart) currentChart.destroy();

        const ctx = document.getElementById("myChart").getContext("2d");
        currentChart = new Chart(ctx, {
          type: "bar",
          data: chartData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: true,
                position: "top",
                labels: { font: { size: 15, weight: "bold" }, padding: 15 },
              },
              datalabels: {
                anchor: "end",
                align: "top",
                formatter: (v) => v,
                font: { weight: "bold", size: 12 },
                color: (ctx) =>
                  ctx.datasetIndex === 0 ? "#1e40af" : "#c2410c",
              },
              tooltip: { enabled: true },
            },
            scales: {
              y: {
                beginAtZero: true,
                max: 45,
                title: {
                  display: true,
                  text: "Performance (%)",
                  font: { size: 15, weight: "bold" },
                },
                ticks: { font: { size: 12 } },
              },
              x: { ticks: { font: { size: 13, weight: "600" } } },
            },
          },
          plugins: [ChartDataLabels],
        });
      }

      // Initialize
      createButtons();
      updateChart();
    </script>
  </body>
</html>
